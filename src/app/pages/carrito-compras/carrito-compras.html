<ion-header>
  <ion-navbar color="{{genericService.getColor()}}">
    <ion-title>Mi carrito</ion-title>
  </ion-navbar>
</ion-header>

<div id="myModal" class="modal animated lightSpeedIn">

  <div class="modal-content">

    <div class="tacha" (click)="cerrar()" [ngStyle]="{'color': genericService.getColorHex()}">
      <ion-icon ios="md-close" md="md-close"></ion-icon>
    </div>
    <div class="selecciona" [ngStyle]="{'color': genericService.getColorHex()}">Selecciona tu tarjeta</div>
    <ion-list>
      <ion-item class="item-list-card" *ngFor="let card of cards" [ngClass]="{'seleccionado':card.selected}" (click)="seleccionar(card)">
        <ion-avatar slot="start">
          <img src="assets/imgs/tarjetas/bank.png" alt="">
        </ion-avatar>
        <div class="datos-tarjetas">
          <div class="name">{{card.alias}}</div>
          <div class="number">{{card.numeroTarjeta}}</div>
        </div>

      </ion-item>
    </ion-list>
    <div class="ingresa" [ngStyle]="{'color': genericService.getColorHex()}">Ã“ ingresa una para hacer el pago</div>



    <div class="form-row">
      <input type="number" placeholder="N. Tarjeta" id="tarj" [(ngModel)]="dataCard.tarj">

      <ion-datetime class="dt" text-left pickerFormat="MM/YY" cancelText="Cancelar" doneText="Aceptar" #fechaNac
        placeholder="04/24" min="2016" max="2050" id="dtime" [(ngModel)]="dataCard.dtime"></ion-datetime>

      <input type="number" placeholder="CVC" id="cvc" [(ngModel)]="dataCard.cvc">




    </div>
    <button ion-button block large style="padding: 10px;
        height: auto;
        contain: none;
        margin-top: 15px;font-size: 14px;"
      [ngStyle]="{'background-color': genericService.getColorHex()}" (click)="setupStripe()">Pagar</button>
  </div>
</div>

<ion-content padding>
  <div>
    <div id="card-{{i}}" class="card animated lightSpeedIn" *ngFor="let p of productosCarrito; let i = index">
      <!-- <div class="tacha">
                <div class="mini-tacha">
                    <ion-icon ios="ios-cart-outline" md="ios-cart-outline" style="color: #3b64bf;" *ngIf="!p.carrito" (click)="agregarToCarrito(p)"></ion-icon>
                    <ion-icon ios="ios-cart" md="ios-cart" *ngIf="p.carrito" style="color: #3b64bf;" (click)="productoService.deleteFavorito(p)"></ion-icon>
                </div>
              </div> -->
      <div class="container-card" (click)="viewDetail(p)">

        <img src="{{env.getImagenIndividual}}{{p.productoProveedor.producto.adjuntoId}}" />
      </div>
      <div class="container-text" (click)="viewDetail(p)">{{p.productoProveedor.producto.nombre}}</div>
      <div class="description" (click)="viewDetail(p)">{{p.productoProveedor.producto.descripcion}}</div>
      <div class="precio" (click)="viewDetail(p)">{{p.precio | currency}}</div>

      <div class="contenedor-carrito" [ngStyle]="{'text-align': !p.cantidad || p.cantidad <= 0 ? 'end' : ''}">
        <div class="menos" *ngIf="p.cantidad > 0" (click)="decrementar(p)">
          <div [ngStyle]="{'color': genericService.getColorHex(), 'border-color': genericService.getColorHex()}">-</div>
        </div>
        <div class="cantidad" *ngIf="p.cantidad > 0">
          <div [ngStyle]="{'color': genericService.getColorHex()}">{{p.cantidad}}</div>
        </div>
        <div class="mas" (click)="incrementa(p)">
          <div [ngStyle]="{'color': genericService.getColorHex(), 'border-color': genericService.getColorHex()}">+</div>
        </div>
      </div>
    </div>
  </div>


</ion-content>
<ion-footer class="footer-button-class">
  <button (tap)="addToList()" [ngStyle]="{'background-color': genericService.getColorHex()}">Agregar a una lista</button>
  <button (tap)="precompra()" [ngStyle]="{'background-color': genericService.getColorHex()}">Comprar</button>
</ion-footer>